<!-- 
    Author: Mike Newell Â© 2012
-->
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="http://169.254.60.224:5000/socket.io/socket.io.js"></script>
        <script>
            var vid,
                canPlay = false,
                duration;
            
            var socket = io.connect('169.254.60.224:5000');
            
            socket.on('output', function (data) {
                
                if(canPlay) {
                    var num = (data.message * duration);
                    num = num.toFixed(3);
                    vid.currentTime = num;
//                    console.log(num);
                }
                
            });
            
            (function($) {
                
                $(window).load(function() {
                    // video
                    vid = document.getElementById('video');
                    
                    vid.addEventListener('canplaythrough', function(evt) {
                        canPlay = true;
                        duration = vid.duration;
                        console.log('can play ' + canPlay);
                        console.log('vid ' + vid);
                        console.log('duration ' + vid.duration);
                    }, false);

                });
            })(jQuery);
            
        </script>
    </head>
    <body>
        <div id="wrap">
            <video id="video" width="1280" height="720" controls="controls">
                <source src="videos/splash.mp4" type="video/mp4" />
                <source src="videos/splash.webm" type="video/webm" />
                <source src="videos/splash.ogv" type="video/ogv" />
                Your browser does not support the video tag.
            </video>
        </div>
    </body>
</html>
